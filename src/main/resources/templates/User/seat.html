<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Theater Seat Map</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .main-container {
            display: flex;
            justify-content: space-between;
            margin: 20px auto;
            max-width: 1200px;
            border: 2px solid #ccc;
            padding: 20px;
            border-radius: 8px;
            background-color: #fff;
        }

        .seat-map-container {
            flex: 3;
        }

        .movie-info-container {
            flex: 1;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            background-color: #f8f9fa;
        }

        .seat {
            width: 60px;
            height: 60px;
            margin: 5px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: #fff;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, color 0.3s;
        }

        .seat.selected {
            background-color: #0911b9;
            color: #fff;
        }

        .seat span {
            font-size: 20px;
            margin-right: 5px;
        }

        .movie-poster {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .movie-details {
            margin-top: 15px;
        }

        .selected-seats {
            margin-top: 15px;
            font-size: 16px;
            color: #333;
        }

        .selected-seats span {
            font-weight: bold;
            color: #0911b9;
        }
        #seatvip{
            margin-left: 40px;
        }
        #seatcouple{
            margin-left: 108px;
        }
        #informationseat{
            display: flex;
            margin-left: 150px;
        }
        .divider {
      border: none;
      border-top: 2px dashed gray; /* Đường kẻ nét đứt */
      margin: 20px 0;
    }
    /* ======================Thông báo cảnh báo độ tuổi ============ */
    @keyframes flash {
      0% { background-color: #f5d985; } /* Vàng */
      50% { background-color: rgb(221, 151, 45); } /* Cam */
      100% { background-color: #e6c383; } /* Vàng */
    }

    .blinking-alert {
      animation: flash 3s infinite; /* Thời gian 1 giây và lặp vô hạn */
      color:red; /* Màu chữ */
      text-align: center;
      font-weight: bold;
      width: 700px;
      margin-left: 70px;
    }
    .time-remaining {
      font-size: 40px;
      color:black;
      font-weight: bold;
      margin-left: 10px;
      margin-top: 2px;
    }
    </style>
</head>
<body>
  <div id="menu-container"></div>

    <div class="main-container">
        <!-- Khung 1: Sơ đồ ghế -->
        <div class="seat-map-container">
            <h2 class="text-center">Movie Theater Seat Map</h2>
            <div class="alert blinking-alert">
                Theo quy định của cục điện ảnh, phim này không dành cho khán giả dưới 18  tuổi.  
              </div>
          <div clss="d-flex" id="informationseat">
            <div class="infoseat">
                <div class="seat seat-regular" onclick="toggleSeat(this)">
                  <span class="seat-icon">🪑</span> 
                </div>
                <span>Ghế Trống</span>
            </div>
            <div class="infoseat">
                <div style=" background-color: #0911b9;" class="seat seat-regular" onclick="toggleSeat(this)">
                   <span class="seat-icon">🪑</span> 
                </div>
                <span>Ghế đang chọn</span>
            </div>
            <div class="infoseat">
                <div style=" background-color: #f50a0a;" class="seat seat-regular" onclick="toggleSeat(this)">
                    <span class="seat-icon">🪑</span> 
                </div>
                <span>Ghế đã chọn</span>
            </div>
          </div> 
            <img style="width: 700px;" src="https://betacinemas.vn/Assets/global/img/booking/ic-screen.png" class="img-responsive mx-auto d-block mb-3">
            <div class="row d-flex justify-content-center">
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A1','regular')"><span>🪑</span>A1</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A2','regular')"><span>🪑</span>A2</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A3','regular')"><span>🪑</span>A3</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A4','regular')"><span>🪑</span>A4</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A5','regular')"><span>🪑</span>A5</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A6','regular')"><span>🪑</span>A6</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A7','regular')"><span>🪑</span>A7</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A8','regular')"><span>🪑</span>A8</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'A9','regular')"><span>🪑</span>A9</div>
            </div>
            <div class="row d-flex justify-content-center">
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B1','regular')"><span>🪑</span>B1</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B2','regular')"><span>🪑</span>B2</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B3','regular')"><span>🪑</span>B3</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B4','regular')"><span>🪑</span>B4</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B5','regular')"><span>🪑</span>B5</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B6','regular')"><span>🪑</span>B6</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B7','regular')"><span>🪑</span>B7</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B8','regular')"><span>🪑</span>B8</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'B9','regular')"><span>🪑</span>B9</div>
            </div>
            <div class="row d-flex justify-content-center">
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C1', 'vip')"><span>💺</span>C1</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C2', 'vip')"><span>💺</span>C2</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C3', 'vip')"><span>💺</span>C3</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C4', 'vip')"><span>💺</span>C4</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C5', 'vip')"><span>💺</span>C5</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C6', 'vip')"><span>💺</span>C6</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C7', 'vip')"><span>💺</span>C7</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'C8', 'vip')"><span>💺</span>C8</div>
            </div>
            <div class="row d-flex justify-content-center">
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D1', 'vip')"><span>💺</span>D1</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D2', 'vip')"><span>💺</span>D2</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D3', 'vip')"><span>💺</span>D3</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D4', 'vip')"><span>💺</span>D4</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D5', 'vip')"><span>💺</span>D5</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D6', 'vip')"><span>💺</span>D6</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D7', 'vip')"><span>💺</span>D7</div>
                <div style="width: 70px;" class="seat" onclick="toggleSeat(this, 'D8', 'vip')"><span>💺</span>D8</div>
            </div>
            <div class="row d-flex justify-content-center">
                <div style="width: 100px;" class="seat" onclick="toggleSeat(this, 'E1-E2','couple')"><span>🛋️</span>E1-E2</div>
                <div style="width: 100px;" class="seat" onclick="toggleSeat(this, 'E3-E4','couple')"><span>🛋️</span>E3-E4</div>
                <div style="width: 100px;" class="seat" onclick="toggleSeat(this, 'E5-E6','couple')"><span>🛋️</span>E5-E6</div>
                <div style="width: 100px;" class="seat" onclick="toggleSeat(this, 'E7-E8','couple')"><span>🛋️</span>E7-E8</div>
            </div>
            <div  style="margin-left: 100px;" class="row">
                <div style="width: 200px;" class="seat seat-regular">
                    <span class="seat-icon">🪑</span> Ghế Thường
                </div>
                <div  style="width: 200px;"  class="seat seat-vip">
                    <span class="seat-icon">💺</span> Ghế Vip
                </div>
                <div style="width: 200px;" class="seat seat-couple">
                    <span class="seat-icon">🛋️</span> Ghế đôi
                </div>
            </div>
            <div  style="margin-left: 100px;" class="row">
                <div style="width: 200px;" class="seat seat-regular">
                    45.000 đ/ticket
                </div>
                <div  style="width: 200px;"  class="seat seat-vip">
                    55.000 đ/ticket
                </div>
                <div style="width: 200px;" class="seat seat-couple">
                     120.000 đ/ticket
                </div>
            </div>
            <div  style="margin-left: 250px;" class="d-flex">
                <p style="font-size: 30px; margin-top: 10px;"><strong>Thời gian còn lại:</strong></p>
                <div id="time" class="time-remaining">10:00</div>
            </div>
        </div>
       

        <!-- Khung 2: Thông tin phim -->
        <div class="movie-info-container">
            <img src="https://files.betacorp.vn/media%2fimages%2f2024%2f10%2f09%2fbeta%2D400x633%2D133538%2D091024%2D49.png" class="movie-poster" alt="Movie Poster">
            <div class="movie-details">
                <h4>Tên phim: Avengers</h4>
                <p>Thể loại: Hành động</p>
                <p>Thời lượng: 120 phút</p>
                <hr class="divider">
                <p>Rạp: Beta Cinema</p>
                <p>Phòng chiếu: 1</p>
            </div>
            <div class="selected-seats">
                <!-- <strong>Ghế đã chọn:</strong>
                <span id="selectedSeatsText"></span> -->
                <p><strong>Selected Seats:</strong> <span id="selected-seats-list"></span></p>
                <p class="total-price"><strong>Total Price:</strong> <span id="total-price">0 VND</span></p>
            </div>
            <button class="btn btn-primary mt-3" id="continueBtn" >Tiếp tục</button>
        </div>
    </div>

    <div id="footer-container"></div>
    <script>
         //  =============== Gọi menu vào trình bày ==============
          // Gọi menu.html và chèn vào #menu-container
    fetch('menu1.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('menu-container').innerHTML = data;
      })
      .catch(error => console.error('Error loading menu:', error));
     
// ========================== Tính tiền vé ===========================
        const selectedSeats = [];
        let totalPrice = 0;

        const seatPrices = {
            regular: 45000,
            vip: 55000,
            couple:120000
        };
        function toggleSeat(seat, seatName, seatType = 'regular') {
            seat.classList.toggle('selected');
            if (seat.classList.contains('selected')) {
                selectedSeats.push(seatName);
                totalPrice += seatPrices[seatType];
            } else {
                const index = selectedSeats.indexOf(seatName);
                if (index > -1) {
                    selectedSeats.splice(index, 1);
                    totalPrice -= seatPrices[seatType];
                }
            }
            document.getElementById('selected-seats-list').textContent = selectedSeats.join(', ');
            document.getElementById('total-price').textContent = totalPrice.toLocaleString() + ' VND';
        }
       
         //  =============== Gọi footer vào trình bày ==============
          // Gọi footer.html và chèn vào #footer-container
          fetch('Footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer-container').innerHTML = data;
      })
      .catch(error => console.error('Error loading menu:', error));
    </script>
    <!-- ===============================Chuyển trang sang trang thanh toán ========================= -->
    <script>
     
    document.getElementById("continueBtn").addEventListener("click", () => {
    // Lấy tổng tiền từ phần tử có id="total-price"
    const totalPrice = parseInt(document.getElementById("total-price").textContent);

    // Kiểm tra nếu tổng tiền khác 0
    if (totalPrice > 0) {
        // Lưu dữ liệu vào LocalStorage (nếu cần)
        // localStorage.setItem("bookingData", JSON.stringify(seatData));
        window.location.href = "thanhtoan.html"; // Chuyển sang trang thanh toán
    } else {
        // Hiển thị cảnh báo nếu tổng tiền là 0
        alert("Tổng tiền phải lớn hơn 0 để tiếp tục.");
    }
    });
    </script>
    <!-- ============================Xử lý đồng hồ =================== -->
     <script>
        // Tổng thời gian: 10 phút (600 giây)
        let totalTime = 600;
    
        // Hàm cập nhật bộ đếm ngược
        function updateTimer() {
          const minutes = Math.floor(totalTime / 60);
          const seconds = totalTime % 60;
    
          // Hiển thị thời gian ở định dạng MM:SS
          document.getElementById('time').textContent = 
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    
          // Giảm thời gian
          totalTime--;
    
          // Khi thời gian về 0, chuyển hướng sang trang gui.html
          if (totalTime < 0) {
            clearInterval(timerInterval);
            window.location.href = "GuiBetaCinema.html"; // Chuyển hướng
          }
        }
    
        // Thiết lập interval để gọi hàm mỗi giây
        const timerInterval = setInterval(updateTimer, 1000);
    
        // Gọi hàm ngay khi trang tải để cập nhật lần đầu
        updateTimer();
      </script>
</body>
</html>
