<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang ThÃ nh ViÃªn</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<!-- Menu vá»›i Bootstrap -->
<div th:replace="~{Brower/navBar:: navbar}"></div>

<div class="container mt-4" style="max-width: 600px;"> <!-- Giá»›i háº¡n Ä‘á»™ rá»™ng ná»™i dung -->
    <!-- Tabs cho ÄÄƒng nháº­p vÃ  ÄÄƒng kÃ½ -->
    <ul class="nav nav-tabs">
        <li class="nav-item w-50 text-center">
            <a class="nav-link active" data-toggle="tab" href="#login">ÄÄƒng nháº­p</a>
        </li>
        <li class="nav-item w-50 text-center">
            <a class="nav-link" data-toggle="tab" href="#register">ÄÄƒng kÃ½</a>
        </li>
    </ul>

    <!-- Ná»™i dung Tab -->
    <div class="tab-content mt-4 mb-4"> <!-- ThÃªm khoáº£ng cÃ¡ch dÆ°á»›i -->
        <!-- Tab ÄÄƒng nháº­p -->
        <div id="login" class="tab-pane fade show active">
            <h3 class="text-center">ÄÄƒng nháº­p</h3>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" placeholder="Nháº­p email">
                </div>
                <div class="form-group">
                    <label for="password">Máº­t kháº©u:</label>
                    <input type="password" class="form-control" id="password" placeholder="Nháº­p máº­t kháº©u">
                </div>
                <div id="errorMessage" class="text-danger mt-2" style="display: none;"></div>
                <button type="button" class="btn btn-primary btn-block" id="loginButton">ÄÄƒng nháº­p</button>
            </form>
        </div>
    <!-- Tab ÄÄƒng kÃ½ -->
    <div id="register" class="tab-pane fade">
        <h3 class="text-center">ÄÄƒng kÃ½</h3>
        <form>
            <!-- Há» vÃ  tÃªn -->
            <div class="form-group">
                <label for="name">Há» vÃ  tÃªn: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ‘¤</span>
                    </div>
                    <input type="text" class="form-control" id="name" placeholder="Nháº­p há» vÃ  tÃªn">
                </div>
            </div>

            <!-- Email -->
            <div class="form-group">
                <label for="email-register">Email: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ“§</span>
                    </div>
                    <input type="email" class="form-control" id="email-register" placeholder="Nháº­p email">
                </div>
            </div>

            <!-- Máº­t kháº©u -->
            <div class="form-group">
                <label for="password-register">Máº­t kháº©u: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ”’</span>
                    </div>
                    <input type="password" class="form-control" id="password-register" placeholder="Nháº­p máº­t kháº©u">
                </div>
            </div>

            <!-- XÃ¡c nháº­n máº­t kháº©u -->
            <div class="form-group">
                <label for="confirm-password">XÃ¡c nháº­n máº­t kháº©u: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ”’</span>
                    </div>
                    <input type="password" class="form-control" id="confirm-password" placeholder="Nháº­p láº¡i máº­t kháº©u">
                </div>
            </div>

            <!-- NgÃ y sinh -->
            <div class="form-group">
                <label for="birthdate">NgÃ y sinh: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ“…</span>
                    </div>
                    <input type="date" class="form-control" id="birthdate">
                </div>
            </div>

            <!-- Giá»›i tÃ­nh -->
            <div class="form-group">
                <label for="gender">Giá»›i tÃ­nh:</label>
                <select id="gender" class="form-control">
                    <option value="male">Nam</option>
                    <option value="female">Ná»¯</option>
                    <option value="other">KhÃ¡c</option>
                </select>
            </div>

            <!-- Sá»‘ Ä‘iá»‡n thoáº¡i -->
            <div class="form-group">
                <label for="phone">Sá»‘ Ä‘iá»‡n thoáº¡i: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ“</span>
                    </div>
                    <input type="tel" class="form-control" id="phone" placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i">
                </div>
            </div>

            <!-- MÃ£ xÃ¡c thá»±c -->
            <div class="form-group">
                <label for="captcha">MÃ£ xÃ¡c thá»±c: <span style="color: red;">*</span></label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">ğŸ”¢</span>
                    </div>
                    <input type="text" class="form-control" id="captcha" placeholder="Nháº­p mÃ£ xÃ¡c thá»±c">
                    <div class="input-group-append">
                        <span class="input-group-text">1234AB</span> <!-- MÃ£ xÃ¡c thá»±c ngáº«u nhiÃªn -->
                    </div>
                </div>
            </div>

            <!-- Checkbox Ä‘iá»u khoáº£n -->
            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" id="terms">
                <label class="form-check-label" for="terms">
                    TÃ´i cam káº¿t tuÃ¢n theo <a href="#">chÃ­nh sÃ¡ch báº£o máº­t</a> vÃ  <a href="#">Ä‘iá»u khoáº£n sá»­ dá»¥ng</a>.
                </label>
            </div>

            <!-- NÃºt ÄÄƒng kÃ½ -->
            <button type="submit" class="btn btn-success btn-block">ÄÄƒng kÃ½</button>
        </form>
    </div>
</div>
    </div>

<!-- Footer -->
<div class="mt-5"> <!-- Táº¡o khoáº£ng cÃ¡ch lá»›n giá»¯a ná»™i dung vÃ  footer -->
    <div th:replace="~{Brower/footer::footer}"></div>
</div>

<script th:src="@{/assets/js/browerJS/menuLocation.js}"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    document.getElementById('loginButton').addEventListener('click', async function () {
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();
        const errorMessage = document.getElementById('errorMessage');

        // Kiá»ƒm tra thÃ´ng tin Ä‘áº§u vÃ o
        if (!email || !password) {
            errorMessage.style.display = 'block';
            errorMessage.textContent = 'Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin.';
            return;
        }

        try {
            // Gá»­i yÃªu cáº§u tá»›i API Ä‘Äƒng nháº­p
            const response = await fetch('/api/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });



            if (response.ok) {
                url = `http://localhost:8080/home.htm?userId=${id}`;
                // Náº¿u Ä‘Äƒng nháº­p thÃ nh cÃ´ng, chuyá»ƒn hÆ°á»›ng tá»›i trang home
                window.location.href = '/home.htm?userId=';
            } else {
                // Náº¿u tháº¥t báº¡i, hiá»ƒn thá»‹ lá»—i
                const errorData = await response.json();
                errorMessage.style.display = 'block';
                errorMessage.textContent = errorData.message || 'TÃªn Ä‘Äƒng nháº­p hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng.';
            }
        } catch (error) {
            console.error('Lá»—i Ä‘Äƒng nháº­p:', error);
            errorMessage.style.display = 'block';
            errorMessage.textContent = 'ÄÃ£ xáº£y ra lá»—i. Vui lÃ²ng thá»­ láº¡i sau.';
        }
    });
</script>

</body>
</html>
